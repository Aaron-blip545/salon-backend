<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Dashboard ‚Äî Salon</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="adminpanel.css" />
    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body>
    <div class="app" id="app">
      <aside class="sidebar">
        <div class="brand">
          <div class="logo">SB</div>
          <div class="brand-text">
            <h3>Salon</h3>
            <small>Admin</small>
          </div>
        </div>

        <nav class="nav">
          <a class="nav-item active" href="#" data-section="dashboard">
            <span class="nav-icon">üìä</span>
            <span>Dashboard</span>
          </a>
          <a class="nav-item" href="#bookings" data-section="bookings">
            <span class="nav-icon">üìÖ</span>
            <span>Bookings</span>
          </a>
          <a class="nav-item" href="#services" data-section="services">
            <span class="nav-icon">‚úÇÔ∏è</span>
            <span>Services</span>
          </a>
          <a class="nav-item" href="#clients" data-section="clients">
            <span class="nav-icon">üë•</span>
            <span>Clients</span>
          </a>
          <a class="nav-item" href="#staff" data-section="staff">
            <span class="nav-icon">üë®‚Äçüíº</span>
            <span>Staff</span>
          </a>
          <a class="nav-item" href="#analytics" data-section="analytics">
            <span class="nav-icon">üìà</span>
            <span>Analytics</span>
          </a>
          <a class="nav-item" href="#reports" data-section="reports">
            <span class="nav-icon">üìã</span>
            <span>Reports</span>
          </a>
        </nav>

        <div class="sidebar-footer">
          <a id="logoutBtn" class="nav-item logout" href="#">Log out</a>
        </div>
      </aside>

      <main class="main">
        <header class="main-header">
          <div class="search-and-title">
            <h1>Dashboard</h1>
            <p class="muted">Overview of bookings and performance</p>
          </div>

          <div class="header-actions">
            <button id="themeToggle" class="btn toggle" aria-label="Toggle theme">üåô</button>
            <div class="welcome">Welcome, <strong>Admin</strong></div>
          </div>
        </header>

        <section class="content">
          <!-- Dashboard Summary Cards -->
          <div id="dashboardSection">
            <div class="summary-cards">
              <div class="summary-card">
                <div class="summary-icon">üìÖ</div>
                <div class="summary-info">
                  <h4>Today's Bookings</h4>
                  <p class="summary-value" id="todayBookings">0</p>
                </div>
              </div>
              <div class="summary-card">
                <div class="summary-icon">‚è≥</div>
                <div class="summary-info">
                  <h4>Pending Bookings</h4>
                  <p class="summary-value" id="pendingBookings">0</p>
                </div>
              </div>
              <div class="summary-card">
                <div class="summary-icon">‚úÖ</div>
                <div class="summary-info">
                  <h4>Completed Today</h4>
                  <p class="summary-value" id="completedToday">0</p>
                </div>
              </div>
              <div class="summary-card">
                <div class="summary-icon">üí∞</div>
                <div class="summary-info">
                  <h4>Revenue Today</h4>
                  <p class="summary-value" id="revenueToday">‚Ç±0</p>
                </div>
              </div>
            </div>

          <!-- Booking Calendar -->
          <div class="card" style="margin-bottom: 2rem;">
            <div class="card-header">
              <h2>Booking Calendar</h2>
              <p class="muted" style="font-size: 0.875rem; margin: 0;">View booked days and appointments</p>
            </div>
            <div class="card-body">
              <div id="bookingCalendar" style="padding: 1rem;">
                <div class="calendar-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                  <button id="prevMonth" class="action-btn confirm">‚Üê Previous</button>
                  <h3 id="currentMonth" style="margin: 0; font-size: 1.25rem; color: var(--text);">Month Year</h3>
                  <button id="nextMonth" class="action-btn confirm">Next ‚Üí</button>
                </div>
                <div id="calendarGrid" style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 8px;">
                  <!-- Calendar days will be inserted here -->
                </div>
                <div id="calendarLegend" style="display: flex; gap: 1.5rem; margin-top: 1rem; font-size: 0.875rem; color: var(--muted);">
                  <div class="calendar-legend-item">
                    <div class="calendar-legend-box has-booking"></div>
                    <span>Has Bookings</span>
                  </div>
                  <div class="calendar-legend-item">
                    <div class="calendar-legend-box today"></div>
                    <span>Today</span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="grid">
            <div class="col col-8">
              <div class="card">
                <div class="card-header">
                  <h2>Recent Appointments</h2>
                  <p class="muted" style="font-size: 0.875rem; margin: 0;">Last 10 bookings</p>
                </div>
                <div class="card-body">
                  <div class="table-wrap" id="dashboardTableWrap">
                    <table id="dashboardAppointmentsTable">
                      <thead>
                        <tr>
                          <th>Client</th>
                          <th>Service</th>
                          <th>Date</th>
                          <th>Time</th>
                          <th>Staff</th>
                          <th>Status</th>
                          <th>Service Status</th>
                          <th>Payment</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr><td colspan="8" style="text-align:center;padding:2rem;color:var(--muted);">Loading...</td></tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>

            <div class="col col-4">
              <div class="card stats">
                <div class="stat-grid">
                  <div class="stat">
                    <div class="stat-title">Total Bookings</div>
                    <div class="stat-value" id="totalBookings">0</div>
                  </div>
                  <div class="stat">
                    <div class="stat-title">Revenue</div>
                      <div class="stat-value" id="revenue">‚Ç±0</div>
                  </div>
                  <div class="stat full">
                    <canvas id="statusChart" width="300" height="200"></canvas>
                  </div>
                </div>
              </div>

              <div class="card">
                <div class="card-header">
                  <h3>Client Activity Summary</h3>
                </div>
                <div class="card-body small-muted">
                  <p><strong>Active clients:</strong> <span id="activeClients">0</span></p>
                  <p><strong>New this week:</strong> <span id="newClientsWeek">0</span></p>
                  <p><strong>New this month:</strong> <span id="newClients">0</span></p>
                  <p><strong>Returning clients:</strong> <span id="returningClients">0</span></p>
                </div>
              </div>

              <div class="card">
                <div class="card-header">
                  <h3>Top Clients</h3>
                  <p class="muted" style="font-size: 0.75rem; margin: 0;">By total revenue</p>
                </div>
                <div class="card-body" style="padding: 0;">
                  <div id="topClientsList" style="max-height: 300px; overflow-y: auto;">
                    <p style="text-align: center; padding: 1rem; color: var(--muted);">Loading...</p>
                  </div>
                </div>
              </div>

              <div class="card">
                <div class="card-header">
                  <h3>Most Picked Staff</h3>
                  <p class="muted" style="font-size: 0.75rem; margin: 0;">This month</p>
                </div>
                <div class="card-body" style="padding: 0;">
                  <div id="topStaffList" style="max-height: 300px; overflow-y: auto; scrollbar-width: none; -ms-overflow-style: none;">
                    <p style="text-align: center; padding: 1rem; color: var(--muted);">Loading...</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
          </div>

          <!-- Bookings Section -->
          <div id="bookingsSection" class="hidden">
            <div class="grid">
              <div class="col col-12">
                <div class="card">
                  <div class="card-header">
                    <h2>All Appointments</h2>
                    <div class="filters-wrapper">
                      <input type="text" id="searchClient" placeholder="Search by client..." class="filter-input">
                      <select id="filterStatus" class="filter-select">
                        <option value="">All Status</option>
                        <option value="pending">Pending</option>
                        <option value="confirmed">Confirmed</option>
                        <option value="completed">Completed</option>
                        <option value="canceled">Canceled</option>
                      </select>
                      <select id="filterPayment" class="filter-select">
                        <option value="GCASH">GCash</option>
                      </select>
                    </div>
                  </div>
                  <div class="card-body">
                    <!-- Empty state shown when there are no bookings -->
                    <div id="emptyState" class="empty-state">
                      <div class="empty-illustration">üì≠</div>
                      <h3>No bookings yet</h3>
                      <p class="muted">You don't have any bookings for the selected period. New bookings will appear here.</p>
                      <div class="empty-actions">
                        <button id="refreshBtn" class="action-btn confirm">Refresh</button>
                      </div>
                    </div>

                    <div class="table-wrap hidden" id="tableWrap">
                      <table id="appointmentsTable">
                        <thead>
                          <tr>
                            <th>Client</th>
                            <th>Service</th>
                            <th>Date</th>
                            <th>Time</th>
                            <th>Staff</th>
                            <th>Booking Status</th>
                            <th>Service Status</th>
                            <th>Payment</th>
                            <th>Receipt</th>
                            <th>Actions</th>
                          </tr>
                        </thead>
                        <tbody>
                        
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Clients Section -->
          <div id="clientsSection" class="hidden">
            <div class="grid">
              <div class="col col-12">
                <div class="card">
                  <div class="card-header">
                    <h2>Client Management</h2>
                    <input type="text" id="searchClients" placeholder="Search clients..." class="filter-input">
                  </div>
                  <div class="card-body">
                    <table id="clientsTable" class="data-table">
                      <thead>
                        <tr>
                          <th>Full Name</th>
                          <th>Email</th>
                          <th>Phone</th>
                          <th>Total Bookings</th>
                          <th>Joined Date</th>
                          <th>Actions</th>
                        </tr>
                      </thead>
                      <tbody></tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Staff Section -->
          <div id="staffSection" class="hidden">
            <div class="grid">
              <div class="col col-12">
                <div class="card">
                  <div class="card-header">
                    <h2>Staff Management</h2>
                    <button class="action-btn confirm" id="addStaffBtn" onclick="addStaff()">+ Add Staff</button>
                  </div>
                  <div class="card-body">
                    <table id="staffTable" class="data-table">
                      <thead>
                        <tr>
                          <th>Full Name</th>
                          <th>Email</th>
                          <th>Phone</th>
                          <th>Role</th>
                          <th>Assigned Bookings</th>
                          <th>Actions</th>
                        </tr>
                      </thead>
                      <tbody></tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Services Section -->
          <div id="servicesSection" class="hidden">
            <div class="grid">
              <div class="col col-12">
                <div class="card">
                  <div class="card-header">
                    <h2>Service Management</h2>
                    <a href="editservice.html" class="action-btn confirm">+ Add Service</a>
                  </div>
                  <div class="card-body">
                    <div id="servicesGrid" class="services-grid"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Analytics Section (hidden by default) -->
          <div id="analyticsSection" class="hidden">
            <div class="grid">
              <div class="col col-12">
                <div class="card">
                  <div class="card-header">
                    <h2>Revenue Analytics</h2>
                    <div style="display: flex; gap: 10px;">
                      <button class="action-btn" id="dailyViewBtn">Daily</button>
                      <button class="action-btn" id="weeklyViewBtn">Weekly</button>
                      <button class="action-btn confirm" id="monthlyViewBtn">Monthly</button>
                    </div>
                  </div>
                  <div class="card-body">
                    <canvas id="revenueChart" height="80"></canvas>
                  </div>
                </div>
              </div>
            </div>

            <div class="grid">
              <div class="col col-6">
                <div class="card">
                  <div class="card-header">
                    <h2>Service Popularity</h2>
                  </div>
                  <div class="card-body">
                    <canvas id="serviceChart" height="200"></canvas>
                  </div>
                </div>
              </div>

              <div class="col col-6">
                <div class="card">
                  <div class="card-header">
                    <h2>Peak Booking Times</h2>
                  </div>
                  <div class="card-body">
                    <canvas id="peakTimesChart" height="200"></canvas>
                  </div>
                </div>
              </div>
            </div>

            <div class="grid">
              <div class="col col-12">
                <div class="card">
                  <div class="card-header">
                    <h2>Booking Trends</h2>
                  </div>
                  <div class="card-body">
                    <canvas id="trendsChart" height="80"></canvas>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Reports Section (hidden by default) -->
          <div id="reportsSection" class="hidden">
            <div class="grid">
              <div class="col col-12">
                <div class="card">
                  <div class="card-header">
                    <h2>Generate Reports</h2>
                  </div>
                  <div class="card-body">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                      <div>
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Start Date</label>
                        <input type="date" id="reportStartDate" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 8px;">
                      </div>
                      <div>
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">End Date</label>
                        <input type="date" id="reportEndDate" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 8px;">
                      </div>
                    </div>
                    
                    <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                      <button class="action-btn confirm" id="exportCSVBtn">üìä Export to CSV</button>
                      <button class="action-btn confirm" id="exportExcelBtn">üìà Export to Excel</button>
                      <button class="action-btn" id="generatePDFBtn">üìÑ Generate PDF Report</button>
                      <button class="action-btn" id="revenueReportBtn">üí∞ Revenue by Service</button>
                      <button class="action-btn" id="customerHistoryBtn">üë• Customer History</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="grid">
              <div class="col col-12">
                <div class="card">
                  <div class="card-header">
                    <h2>Report Preview</h2>
                  </div>
                  <div class="card-body">
                    <div id="reportPreview">
                      <p class="muted">Select date range and click a report button to generate preview</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>
      </main>
    </div>

    <script src="adminpanel.js"></script>
  </body>
</html>